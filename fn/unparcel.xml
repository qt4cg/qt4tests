<?xml version="1.0" encoding="us-ascii"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="fn-unparcel">
   <description>Tests for the proposed XPath 4.0 unparcel() function</description>
   <link type="spec" document="http://www.w3.org/TR/xpath-functions-30/"
         idref="func-empty"/>
   
   <dependency type="spec" value="XP40+ XQ40+"/>

   <test-case name="fn-unparcel-001">
      <description> Create an empty parcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>empty(unparcel(parcel(())))</test>
      <result>
         <assert-true/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-002">
      <description> Create a singleton parcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>count(unparcel(parcel(42))) = 1</test>
      <result>
         <assert-true/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-003">
      <description> Create a singleton parcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>unparcel(parcel(42)) eq 42</test>
      <result>
         <assert-true/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-004">
      <description> Create a non-trivial parcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>count(unparcel(parcel(1 to 10))) eq 10</test>
      <result>
         <assert-true/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-005">
      <description> Create a non-trivial parcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>sum(unparcel(parcel(1 to 10))) eq 55</test>
      <result>
         <assert-true/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-006">
      <description> Use unparcel to deconstruct an array </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>array:members([("a", "b", "c"), ("d", "e", "f")]) ! (unparcel(.) => string-join())</test>
      <result>
         <assert-deep-eq>("abc", "def")</assert-deep-eq>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-901">
      <description> Unsuitable operand for unparcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>unparcel([])</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-902">
      <description> Unsuitable operand for unparcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>unparcel((parcel(1), parcel(2)))</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-903">
      <description> Unsuitable operand for unparcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>unparcel(())</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-904">
      <description> Unsuitable operand for unparcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>unparcel(904)</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   <test-case name="fn-unparcel-905">
      <description> Unsuitable operand arity for unparcel </description>
      <created by="Michael Kay" on="2021-06-28"/>
      <test>unparcel(parcel(1), parcel(2))</test>
      <result>
         <error code="XPST0017"/>
      </result>
   </test-case>

 
</test-set>
