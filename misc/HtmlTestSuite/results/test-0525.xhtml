<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait" lang="en">
<head><meta charset="utf-8"/>
<title>CSS Grid Layout Test: Absolute positioning changing containing block</title>
<link href="mailto:rego@igalia.com" rel="author" title="Manuel Rego Casasnovas"/>
<link href="https://drafts.csswg.org/css-grid-1/#abspos" rel="help" title="9. Absolute Positioning"/>
<link href="absolute-positioning-changing-containing-block-001-ref.html" rel="match"/>
<meta content="This test checks that absolutelly positioned children of a grid are properly sized when the containing block switches between the grid container and a grid ancestor." name="assert"/>
<style>
.wrapper {
  width: 100px;
  height: 100px;
  margin-bottom: 25px;
  background: purple;
  position: relative;
}

.grid {
  display: grid;
  grid-template: 10px / 10px;
  width: 50px;
  height: 50px;
  background: lightblue;
}

.item {
  width: 75%;
  height: 75%;
  background: orange;
  position: absolute;
}
</style>

</head><body><p>The test PASS if you see an orange box inside a purple box on top and a small orange box inside a light blue box inside a purple box on bottom.</p>

<div class="wrapper">
  <div class="grid" id="grid-as-cb" style="position: relative;">
    <div class="item"/>
  </div>
</div>
<div class="wrapper">
  <div class="grid" id="grid-as-parent">
    <div class="item"/>
  </div>
</div>

<script>
  window.requestAnimationFrame(() =&gt; {
    document.getElementById("grid-as-cb").style.position = "initial";
    document.getElementById("grid-as-parent").style.position = "relative";
    document.body.offsetLeft;
    document.documentElement.classList.remove('reftest-wait');
  });
</script>

</body></html>